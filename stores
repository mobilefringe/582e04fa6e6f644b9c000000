<style>
    .stores_table_headers {
        width: 90%;
    }
    .store_initial {
        display: inline-block;
    }
    .store_row_name p {
        display: inline-block;
    }
    i.fa.fa-phone {
        font-size: 24px;
    }
</style>

<div class="row">
    <div class="trim_screen">
        <h1>Store List</h1>
        <div class="row">
            <div class="col-md-3 col-md-push-9">
                <a class="store_tab" href="#alphabetical" aria-controls="alphabetical" role="tab" data-toggle="tab">
                    <h3>Stores A-Z</h3>
                </a>    
                <div class="alphabet_bg switch_store">
                    <button class="btn-secondary" onClick="parent.location='#A'">A</button>
                    <button class="btn-secondary" onClick="parent.location='#B'">B</button>
                    <button class="btn-secondary" onClick="parent.location='#C'">C</button>
                    <button class="btn-secondary" onClick="parent.location='#D'">D</button>
                    <button class="btn-secondary" onClick="parent.location='#E'">E</button>
                    <button class="btn-secondary" onClick="parent.location='#F'">F</button>
                    <button class="btn-secondary" onClick="parent.location='#G'">G</button>
                    <button class="btn-secondary" onClick="parent.location='#H'">H</button>
                    <button class="btn-secondary" onClick="parent.location='#I'">I</button>
                    <button class="btn-secondary" onClick="parent.location='#J'">J</button>
                    <button class="btn-secondary" onClick="parent.location='#K'">K</button>
                    <button class="btn-secondary" onClick="parent.location='#L'">L</button>
                    <button class="btn-secondary" onClick="parent.location='#M'">M</button>
                    <button class="btn-secondary" onClick="parent.location='#N'">N</button>
                    <button class="btn-secondary" onClick="parent.location='#O'">O</button>
                    <button class="btn-secondary" onClick="parent.location='#P'">P</button>
                    <button class="btn-secondary" onClick="parent.location='#Q'">Q</button>
                    <button class="btn-secondary" onClick="parent.location='#R'">R</button>
                    <button class="btn-secondary" onClick="parent.location='#S'">S</button>
                    <button class="btn-secondary" onClick="parent.location='#T'">T</button>
                    <button class="btn-secondary" onClick="parent.location='#U'">U</button>
                    <button class="btn-secondary" onClick="parent.location='#V'">V</button>
                    <button class="btn-secondary" onClick="parent.location='#W'">W</button>
                    <button class="btn-secondary" onClick="parent.location='#X'">X</button>
                    <button class="btn-secondary" onClick="parent.location='#Y'">Y</button>
                    <button class="btn-secondary" onClick="location.href='Z'">Z</button>
                </div>
                <a class="store_tab" href="#categories" aria-controls="categories" role="tab" data-toggle="tab">
                    <h3>Catetegories</h3>
                </a>
                <div class="switch_category" id="category_container_phone">
                    <script id="category_template_phone" type="x-tmpl-mustache/text">
                        <button class="btn-secondary category_btn" onClick="parent.location='#{{id}}'" name="{{id}}">{{name}}</button>
                    </script>
                </div>
            </div>    
            <div class="col-md-9 col-md-pull-3">    
                <div class="tab-content">
                    <div role="tabpanel" class="tab-pane active" id="alphabetical">
                        <!--<h4 class="">Stores A-Z</h4>-->
                        <div class="store_list" id="store_list_container">
                            <script id="store_list_template" type="x-tmpl-mustache/text">
                                <div class="store_list_content">
                                    <div class="stores_table_headers" style="{{show}}">
                                        <a id="{{initial}}">{{initial}}</a>
                                        <a href="#top" class="pull-right stores_gotop">
                                            <img src="//www.mallmaverick.com/system/site_images/photos/000/000/280/original/icon_gotop.png?1370370003">
                                        </a>
                                    </div>
                                    <div class="store_row_name">
                                        <a href="/stores/{{slug}}">{{name}}</a>
                                        <div class="stores_row pull-right">
                                            <span class="has_sale" style="{{promotion_exist}}">SALE</span>
                                            <span class="has_new" style="{{new_store}}">New</span>
                                            <span class="store_phone hidden-xs">{{phone}}</span>
                                            <span><a class="visible-xs-inline-block"style="{{phone_exist}}" href="tel:{{phone}}">
                                                <i class="fa fa-phone" aria-hidden="true"></i>
                                            </a></span>
                                        </div>
                                    </div>
                                </div>
                            </script>
                        </div>
                    </div>
                    <div role="tabpanel" class="tab-pane" id="categories">
                        <div class="store_list" id="category_list_container">
                            <script id="category_list_template" type="x-tmpl-mustache/text">
                                <div class="store_list_content {{block}}">
                                    <div class="stores_table_headers" style="{{show}}">
                                        <a id="{{id}}">{{header}}</a>
                                        <a href="#top" class="pull-right stores_gotop">
                                            <img src="//www.mallmaverick.com/system/site_images/photos/000/000/280/original/icon_gotop.png?1370370003">
                                        </a>
                                    </div>
                                    <div class="store_row_name">
                                        <a href="/stores/{{slug}}">{{name}}</a>
                                        <div class="stores_row pull-right">
                                            <span class="has_sale" style="{{promotion_exist}}">SALE</span>
                                            <span class="has_new" style="{{new_store}}">New</span>
                                            <span class="store_phone hidden-xs">{{phone}}</span>
                                            <span><a class="visible-xs-inline-block"style="{{phone_exist}}" href="tel:{{phone}}">
                                                <i class="fa fa-phone" aria-hidden="true"></i>
                                            </a></span>
                                        </div>
                                    </div>
                                </div>
                            </script>
                        </div>
                    </div>
                </div>
            </div>    
        </div>
    </div>
</div>
<script>
    $(document).ready(function(e){
        init(e);
        function renderAll (){
            var stores = getStoresList();
            var categories = getStoreCategories();
            var half = Math.ceil(categories.length / 2)
            var leftSide = categories.splice(0, half);
            var rightSide = categories
            
            renderStoreList('#store_list_container','#store_list_template', stores, "stores");
            renderStoreList('#store_list_container_right','#store_list_template_right', stores, "stores");
            renderStoreListCatetories('#category_list_container','#category_list_template', leftSide, stores);
            renderGeneral('#category_container_phone', '#category_template_phone', categories);
        }
        
        loadMallDataCached(renderAll); 
        
        $(".switch_store button").click(function(){
            $("#category").hide();
            $("#list").show();    
            location.hash = "#" + $(this).text();
        })
        
        $(".switch_category button").click(function(){            
            $("#list").hide();            
            $("#category").show();
            location.hash = "#" + $(this).attr("name");
        })
    })
</script>