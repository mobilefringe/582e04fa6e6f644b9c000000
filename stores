<section class="container">
    <div class="trim_screen">
        <div class="row">
            <h1>Store List</h1>
            <div class="col-md-9">
            
                <!--<span class="store_initial hidden_now" id="cat_name"></span>-->
                <div id="store_list_container">
                    <script id="store_list_template" type="x-tmpl-mustache/text">
                        <div class="stores_table_headers" style="{{show}}">
                	    	<a name="{{initial}}">{{initial}}</a> 
            				
                            <a href="#top" class="pull-right stores_gotop">
                                <img src="https://www.mallmaverick.com/system/site_images/photos/000/000/280/original/icon_gotop.png?1370370003">
                            </a>                    			
                        </div>
                        <div class="row cats_row" data-cat="{{cat_list}}">
                            <div class="col-md-7 col-xs-9">
                                <p class="store_row_name"><a href="/stores/{{slug}}">{{name}}</a></p>
                            </div>
                            <div class="col-md-5 col-xs-3">
                                <p class="store_list_name pull-right">
                                    <span style="{{new_store}}" class="has_new">New</span>
                                    <span class="has_sale" style="{{promotion_exist}}">SALE</span>
                                    <a style="{{phone_exist}}" href="tel:{{phone}}"><i class="fa fa-phone visible-xs-inline-block" aria-hidden="true"></i><span class="store_phone hidden-xs">{{phone}}</span></a>
                                </p>
                            </div>
                        </div>
                    </script>
                </div>   
                
            </div>
            
            <div class="col-md-3">
                <a href="#list" data-toggle="tab" class="store_tab_toggle" style="padding: 0px;">
                    <h3>Store A-Z</h3>
                </a>
                <div class="alphabet_bg switch_store">
                    <button class="btn-secondary" onClick="parent.location='#A'">A</button>
                    <button class="btn-secondary" onClick="parent.location='#B'">B</button>
                    <button class="btn-secondary" onClick="parent.location='#C'">C</button>
                    <button class="btn-secondary" onClick="parent.location='#D'">D</button>
                    <button class="btn-secondary" onClick="parent.location='#E'">E</button>
                    <button class="btn-secondary" onClick="parent.location='#F'">F</button>
                    <button class="btn-secondary" onClick="parent.location='#G'">G</button>
                    <button class="btn-secondary" onClick="parent.location='#H'">H</button>
                    <button class="btn-secondary" onClick="parent.location='#I'">I</button>
                    <button class="btn-secondary" onClick="parent.location='#J'">J</button>
                    <button class="btn-secondary" onClick="parent.location='#K'">K</button>
                    <button class="btn-secondary" onClick="parent.location='#L'">L</button>
                    <button class="btn-secondary" onClick="parent.location='#M'">M</button>
                    <button class="btn-secondary" onClick="parent.location='#N'">N</button>
                    <button class="btn-secondary" onClick="parent.location='#O'">O</button>
                    <button class="btn-secondary" onClick="parent.location='#P'">P</button>
                    <button class="btn-secondary" onClick="parent.location='#Q'">Q</button>
                    <button class="btn-secondary" onClick="parent.location='#R'">R</button>
                    <button class="btn-secondary" onClick="parent.location='#S'">S</button>
                    <button class="btn-secondary" onClick="parent.location='#T'">T</button>
                    <button class="btn-secondary" onClick="parent.location='#U'">U</button>
                    <button class="btn-secondary" onClick="parent.location='#V'">V</button>
                    <button class="btn-secondary" onClick="parent.location='#W'">W</button>
                    <button class="btn-secondary" onClick="parent.location='#X'">X</button>
                    <button class="btn-secondary" onClick="parent.location='#Y'">Y</button>
                    <button class="btn-secondary" onClick="location.href='Z'">Z</button>
                </div>
                <a href="#category" data-toggle="tab" class="store_tab_toggle" style="padding: 0px;">
                    <h3>Categories</h3>
                </a>
                <div class="switch_category" id="category_container_phone">
                    <script id="category_template_phone" type="x-tmpl-mustache/text">
                        <button class="btn-secondary category_btn" onClick="parent.location='#{{id}}'" name="{{id}}">{{name}}</button>
                    </script>
                </div>
            </div>                
        </div>
    </div>
</section>  
<script>
    $(document).ready(function(e){
        function renderAll(){
            var categories = getStoreCategories();
            var stores = getStoresList();
            renderStoreList('#store_list_container','#store_list_template', stores, "stores");
            renderGeneral('#category_container', '#category_template', categories);
            renderGeneral('#category_container_phone', '#category_template_phone', categories);
            // show_content();
            $('#category_container_phone').prepend('<li href="#" class="show_all_stores">All</li>');
            // show_cat_stores();

        }
        loadMallDataCached(renderAll); 
        
        $(".switch_store button").click(function(){
            $("#category").hide();
            $("#list").show();    
            location.hash = "#" + $(this).text();
        })
        
        $(".switch_category button").click(function(){            
            $("#list").hide();            
            $("#category").show();
            location.hash = "#" + $(this).attr("name");
        })
    })
</script>